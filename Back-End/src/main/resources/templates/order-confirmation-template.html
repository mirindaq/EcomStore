<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="color-scheme" content="light only" />
  <meta name="supported-color-schemes" content="light only" />
  <title>X√°c nh·∫≠n ƒë∆°n h√†ng</title>
</head>

<body style="margin:0;padding:0;background-color:#f6f7fb;font-family:'Segoe UI',Roboto,Arial,sans-serif;color:#202124;">
  <table role="presentation" width="100%"
    style="max-width:650px;margin:auto;background-color:#ffffff;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.08);border-collapse:collapse;">
    <!-- Header -->
    <tr>
      <td
        style="background:linear-gradient(135deg,#10b981,#059669);padding:24px 32px;color:#ffffff;border-top-left-radius:10px;border-top-right-radius:10px;">
        <h1 style="margin:0;font-size:22px;font-weight:600;">üéâ ƒê·∫∑t h√†ng th√†nh c√¥ng!</h1>
        <p style="margin:6px 0 0;font-size:14px;opacity:0.9;">C·∫£m ∆°n b·∫°n ƒë√£ tin t∆∞·ªüng v√† mua s·∫Øm t·∫°i c·ª≠a h√†ng</p>
      </td>
    </tr>

    <!-- Order Info -->
    <tr>
      <td style="padding:28px 32px;">
        <div
          style="background-color:#f0fdf4;border-left:4px solid #10b981;padding:16px 20px;border-radius:0 8px 8px 0;margin-bottom:24px;">
          <p style="margin:0;font-size:16px;font-weight:600;color:#059669;">
            M√£ ƒë∆°n h√†ng: <span th:text="'#' + ${order.id}" style="color:#202124;">#123456</span>
          </p>
          <p style="margin:8px 0 0;font-size:14px;color:#6b7280;">
            Ng√†y ƒë·∫∑t: <span th:text="${#temporals.format(order.orderDate, 'dd/MM/yyyy HH:mm')}">01/01/2024 10:30</span>
          </p>
        </div>

        <!-- Receiver Info -->
        <h3 style="margin:0 0 12px;font-size:16px;color:#374151;border-bottom:2px solid #e5e7eb;padding-bottom:8px;">
          üìç Th√¥ng tin nh·∫≠n h√†ng
        </h3>
        <table role="presentation" width="100%" style="margin-bottom:24px;border-collapse:collapse;">
          <tr>
            <td style="padding:8px 0;font-size:14px;color:#6b7280;width:130px;">Ng∆∞·ªùi nh·∫≠n:</td>
            <td style="padding:8px 0;font-size:14px;font-weight:500;color:#202124;" th:text="${order.receiverName}">
              Nguy·ªÖn VƒÉn A</td>
          </tr>
          <tr>
            <td style="padding:8px 0;font-size:14px;color:#6b7280;">S·ªë ƒëi·ªán tho·∫°i:</td>
            <td style="padding:8px 0;font-size:14px;font-weight:500;color:#202124;" th:text="${order.receiverPhone}">
              0912345678</td>
          </tr>
          <tr th:if="${!order.isPickup}">
            <td style="padding:8px 0;font-size:14px;color:#6b7280;vertical-align:top;">ƒê·ªãa ch·ªâ:</td>
            <td style="padding:8px 0;font-size:14px;font-weight:500;color:#202124;" th:text="${order.receiverAddress}">
              123 ƒê∆∞·ªùng ABC, Qu·∫≠n 1, TP.HCM</td>
          </tr>
          <tr th:if="${order.isPickup}">
            <td style="padding:8px 0;font-size:14px;color:#6b7280;">H√¨nh th·ª©c:</td>
            <td style="padding:8px 0;font-size:14px;font-weight:500;color:#10b981;">üè™ Nh·∫≠n t·∫°i c·ª≠a h√†ng</td>
          </tr>
          <tr>
            <td style="padding:8px 0;font-size:14px;color:#6b7280;">Thanh to√°n:</td>
            <td style="padding:8px 0;font-size:14px;font-weight:500;color:#202124;" th:text="${order.paymentMethod.name() == 'CASH_ON_DELIVERY' ? 'Thanh to√°n khi nh·∫≠n h√†ng (COD)' : 
                                   order.paymentMethod.name() == 'VN_PAY' ? 'VNPay' : 
                                   order.paymentMethod.name() == 'PAY_OS' ? 'PayOS' : order.paymentMethod}">
              Thanh to√°n khi nh·∫≠n h√†ng
            </td>
          </tr>
        </table>

        <!-- Order Details -->
        <h3 style="margin:0 0 12px;font-size:16px;color:#374151;border-bottom:2px solid #e5e7eb;padding-bottom:8px;">
          üõí Chi ti·∫øt ƒë∆°n h√†ng
        </h3>
        <table role="presentation" width="100%" style="margin-bottom:20px;border-collapse:collapse;">
          <thead>
            <tr style="background-color:#f9fafb;">
              <th
                style="padding:12px 8px;font-size:13px;font-weight:600;color:#6b7280;text-align:left;border-bottom:1px solid #e5e7eb;">
                S·∫£n ph·∫©m</th>
              <th
                style="padding:12px 8px;font-size:13px;font-weight:600;color:#6b7280;text-align:center;border-bottom:1px solid #e5e7eb;">
                SL</th>
              <th
                style="padding:12px 8px;font-size:13px;font-weight:600;color:#6b7280;text-align:right;border-bottom:1px solid #e5e7eb;">
                ƒê∆°n gi√°</th>
              <th
                style="padding:12px 8px;font-size:13px;font-weight:600;color:#6b7280;text-align:right;border-bottom:1px solid #e5e7eb;">
                Th√†nh ti·ªÅn</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="detail : ${orderDetails}">
              <td style="padding:12px 8px;font-size:14px;color:#202124;border-bottom:1px solid #f3f4f6;">
                <span th:text="${detail.productVariant.product.name}">iPhone 15 Pro Max</span>
                <br
                  th:if="${detail.productVariant.productVariantValues != null and !detail.productVariant.productVariantValues.isEmpty()}" />
                <span
                  th:if="${detail.productVariant.productVariantValues != null and !detail.productVariant.productVariantValues.isEmpty()}"
                  style="font-size:12px;color:#6b7280;">
                  <th:block th:each="pvv, stat : ${detail.productVariant.productVariantValues}">
                    <span th:text="${pvv.variantValue.value}"></span>
                    <th:block th:if="${!stat.last}"> / </th:block>
                  </th:block>
                </span>
              </td>
              <td
                style="padding:12px 8px;font-size:14px;color:#202124;text-align:center;border-bottom:1px solid #f3f4f6;"
                th:text="${detail.quantity}">1</td>
              <td
                style="padding:12px 8px;font-size:14px;color:#202124;text-align:right;border-bottom:1px solid #f3f4f6;"
                th:text="${#numbers.formatDecimal(detail.price, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">30,000,000 ‚Ç´</td>
              <td
                style="padding:12px 8px;font-size:14px;font-weight:500;color:#202124;text-align:right;border-bottom:1px solid #f3f4f6;"
                th:text="${#numbers.formatDecimal(detail.price * detail.quantity, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">
                30,000,000 ‚Ç´</td>
            </tr>
          </tbody>
        </table>

        <!-- Order Summary -->
        <table role="presentation" width="100%"
          style="margin-bottom:20px;border-collapse:collapse;background-color:#f9fafb;border-radius:8px;">
          <tr>
            <td style="padding:12px 16px;font-size:14px;color:#6b7280;">T·ªïng ti·ªÅn h√†ng:</td>
            <td style="padding:12px 16px;font-size:14px;color:#202124;text-align:right;"
              th:text="${#numbers.formatDecimal(order.totalPrice, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">32,000,000 ‚Ç´</td>
          </tr>
          <tr th:if="${order.totalDiscount > 0}">
            <td style="padding:12px 16px;font-size:14px;color:#6b7280;">Gi·∫£m gi√°:</td>
            <td style="padding:12px 16px;font-size:14px;color:#ef4444;text-align:right;"
              th:text="'-' + ${#numbers.formatDecimal(order.totalDiscount, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">-2,000,000 ‚Ç´
            </td>
          </tr>
          <tr style="border-top:2px solid #e5e7eb;">
            <td style="padding:16px;font-size:16px;font-weight:700;color:#202124;">T·ªïng thanh to√°n:</td>
            <td style="padding:16px;font-size:18px;font-weight:700;color:#dc2626;text-align:right;"
              th:text="${#numbers.formatDecimal(order.finalTotalPrice, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">30,000,000 ‚Ç´
            </td>
          </tr>
        </table>

        <!-- Note -->
        <div th:if="${order.note != null and !order.note.isEmpty()}"
          style="background-color:#fef3c7;border-left:4px solid #f59e0b;padding:12px 16px;border-radius:0 8px 8px 0;margin-bottom:20px;">
          <p style="margin:0;font-size:14px;color:#92400e;">
            <strong>üìù Ghi ch√∫:</strong> <span th:text="${order.note}">Ghi ch√∫ c·ªßa kh√°ch h√†ng</span>
          </p>
        </div>

        <!-- CTA -->
        <div style="text-align:center;margin-top:24px;">
          <p style="font-size:14px;color:#6b7280;margin:0 0 16px;">
            B·∫°n c√≥ th·ªÉ theo d√µi ƒë∆°n h√†ng c·ªßa m√¨nh trong ph·∫ßn "L·ªãch s·ª≠ ƒë∆°n h√†ng" tr√™n website ho·∫∑c app.
          </p>
        </div>
      </td>
    </tr>

    <!-- Footer -->
    <tr>
      <td
        style="background-color:#f6f7fb;text-align:center;padding:20px;font-size:13px;color:#6b7280;border-top:1px solid #e5e7eb;border-bottom-left-radius:10px;border-bottom-right-radius:10px;">
        <p style="margin:0 0 8px;">N·∫øu b·∫°n c√≥ b·∫•t k·ª≥ c√¢u h·ªèi n√†o, vui l√≤ng li√™n h·ªá v·ªõi ch√∫ng t√¥i.</p>
        <p style="margin:0;">
          Ph√°t h√†nh b·ªüi <strong style="color:#10b981;">Ecommerce</strong><br />
          <em>C·∫£m ∆°n b·∫°n ƒë√£ tin t∆∞·ªüng v√† ƒë·ªìng h√†nh c√πng ch√∫ng t√¥i!</em>
        </p>
      </td>
    </tr>
  </table>
</body>

</html>